{% extends "base.html" %}

{% block title %}{{ metadata.title or "Datasette" }}: {% for database in databases %}{{ database.name }}{% if not loop.last %}, {% endif %}{% endfor %}{% endblock %}

{% block body_class %}index{% endblock %}

{% block content %}
<h1>{{ metadata.title or "Datasette" }}{% if private %} ğŸ”’{% endif %}</h1>

{% block description_source_license %}{% include "_description_source_license.html" %}{% endblock %}

<h2>Documentation and Information</h2>
<p>
    <a href="/static/docs/index.html">Collection-Analysis Documentation</a>: <b>Data Definitions, and Useful Queries</b> 
</p>

<hr />

<h2>Places To Start Exploring:</h2>

<h2>CHPL Branch Locations</h2>
<ul>
    <li><h3>ğŸ—ºï¸<a href="/chpl/branch_locations">Explore an Interactive Map of CHPL Branch Locations</a></h3></li>
</ul>

<hr />

<h2>New Titles</h2>
<p>
    <ul>
        <li>ğŸ“š<a href="/current_collection/new_titles_view?_facet=item_format">All New Titles Added to the Collection in the Last 30 Days</a></li>
        <li>&nbsp;</li>
        <li>ğŸ“•<a href="/current_collection/new_titles_view?_facet=item_format&item_format=Book">New <b>Book</b> Titles Added to the Collection in the Last 30 Days</a></li>
        <li>ğŸ“—<a href="/current_collection/new_titles_view?_facet=item_format&item_format=Juvenile+Book">New <b>Juvenile Book</b> Titles Added to the Collection in the Last 30 Days</a></li>
        <li>&nbsp;</li>
        <li>ğŸ“±<a href="/current_collection/new_titles_view?_facet=item_format&item_format=Downloadable+Book">New <b>Downloadable Book</b> Titles Added to the Collection in the Last 30 Days</a></li>
        <li>ğŸ¬<a href="/current_collection/new_titles_view?_facet=item_format&item_format=Downloadable+Video">New <b>Downloadable Video</b> Titles Added to the Collection in the Last 30 Days</a></li>
        <li>&nbsp;</li>
        <li>ğŸ“€<a href="/current_collection/new_titles_view?_facet=item_format&item_format__in=New+Release+DVDs"><b>New Release DVD</b> Titles Added to the Collection in the Last 30 Days</a></li>
        <li>ğŸ’¿<a href="/current_collection/new_titles_view?_facet=item_format&item_format=DVD%2FVideocassette"><b>DVD</b> Titles Added to the Collection in the Last 30 Days</a></li>
        <li>&nbsp;</li>
        <li>ğŸ’¿<a href="/current_collection/new_titles_view?_facet=item_format&item_format=Music+on+CD"><b>Music on CD</b> Titles Added to the Collection in the Last 30 Days</a></li>
        <li>ğŸœ<a href="/current_collection/new_titles_view?_facet=item_format&item_format=Downloadable+Music"><b>Downloadable Music</b> Titles Added to the Collection in the Last 30 Days</a></li>
        
    </ul>
</p>

<br />

<h3>Item Information</h3>
<ul>
    <li>ğŸ›ï¸<a href="/current_collection/location_view?_facet=branch_name&_facet_size=max">Explore a Faceted List of CHPL Branches and Shelf-locations</a></li>
</ul>

<hr />

<h3>Explore the CHPL Collection data in the datasets below:</h3>

{% for database in databases %}
    <h2 style="padding-left: 10px; border-left: 10px solid #{{ database.color }}"><a href="{{ urls.database(database.name) }}">{{ database.name }}</a>{% if database.private %} ğŸ”’{% endif %}</h2>
    <p>
        {% if database.show_table_row_counts %}{{ "{:,}".format(database.table_rows_sum) }} rows in {% endif %}{{ database.tables_count }} table{% if database.tables_count != 1 %}s{% endif %}{% if database.tables_count and database.hidden_tables_count %}, {% endif -%}
        {% if database.hidden_tables_count -%}
            {% if database.show_table_row_counts %}{{ "{:,}".format(database.hidden_table_rows_sum) }} rows in {% endif %}{{ database.hidden_tables_count }} hidden table{% if database.hidden_tables_count != 1 %}s{% endif -%}
        {% endif -%}
        {% if database.views_count -%}
            {% if database.tables_count or database.hidden_tables_count %}, {% endif -%}
            {{ "{:,}".format(database.views_count) }} view{% if database.views_count != 1 %}s{% endif %}
        {% endif %}
    </p>
    <p>{% for table in database.tables_and_views_truncated %}<a href="{{ urls.table(database.name, table.name) }}"{% if table.count %} title="{{ table.count }} rows"{% endif %}>{{ table.name }}</a>{% if table.private %} ğŸ”’{% endif %}{% if not loop.last %}, {% endif %}{% endfor %}{% if database.tables_and_views_more %}, <a href="{{ urls.database(database.name) }}">...</a>{% endif %}</p>
{% endfor %}

{% endblock %}

