{#
  base.html — CHPL-branded Datasette base template
  Written against: Datasette 1.0a24

  Datasette's header structure:
    <header class="hd"><nav>
      {% block nav %}
        {% block crumbs %}...{% endblock %}
        [menu links]
      {% endblock %}
    </nav></header>

  We override only {% block crumbs %} — the innermost sub-block — to
  prepend the logo and site title before the breadcrumb nav, avoiding
  any conflict with the outer nav/header markup.

  Static image URL: /static/CHPL_Brandmark_Primary.svg
  (urls.static() is for Datasette's own built-in static files only;
   custom --static mount paths are referenced directly)

  NOTE: Template API is not guaranteed stable across minor version bumps.
  If Datasette is upgraded, verify that block names and nav structure
  still match and update accordingly.
#}
{% extends "default:base.html" %}

{% block extra_head %}
{{ super() }}
{# Anti-FODT: apply saved/system theme before CSS renders to prevent flash #}
<script>(function(){var t=localStorage.getItem('chpl-theme');if(t==='dark'||t==='light'){document.documentElement.setAttribute('data-theme',t);}else if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches){document.documentElement.setAttribute('data-theme','dark');}}());</script>
{% endblock extra_head %}

{% block crumbs %}
<div class="chpl-nav-inner">
  <a href="/" class="chpl-logo-link" aria-label="Cincinnati &amp; Hamilton County Public Library — home">
    <img src="/static/CHPL_Brandmark_OneColorNavy.svg"
         alt="Cincinnati &amp; Hamilton County Public Library"
         class="chpl-logo"
         width="120"
         height="40">
  </a>
  <span class="chpl-site-title">ILS-Reports</span>
</div>
{{ super() }}
<button data-theme-toggle class="chpl-theme-toggle" aria-label="Toggle dark/light mode" title="Toggle dark/light mode">
  <svg class="chpl-theme-icon-moon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
  <svg class="chpl-theme-icon-sun" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
{% endblock crumbs %}

{% block footer %}
<p>
  Cincinnati &amp; Hamilton County Public Library
  · <a href="https://www.chpl.org/">chpl.org</a>
  · Data updated nightly from Sierra ILS
  · <a href="https://github.com/cincinnatilibrary/ils-reports">Source code</a>
  · Powered by <a href="https://datasette.io/">Datasette</a>
</p>
{% endblock footer %}
